$.moxa.controller(function(e,f,g,h,c){function b(a){mData.dinner=mData.dinner.concat(a.dinner);e.dinner.onDinnerJson(a.dinner)}f.set({dinnerJson:function(a){c.get("res/dinner.json?v="+a,null,b)}});mData={breakfast:null,dinner:null};c.get("res/init.json",null,function(a){mData.breakfast=a.breakfast;mData.dinner=a.dinner;e.breakfast.init(mData.breakfast);e.dinner.init(mData.dinner)});return{onParent:function(){}}});$.moxa.def({url_help:"http://example.com/help.html",url_twitter:"https://twitter.com/",res_confirm:"do you do?",res_error:"its error!"});$.moxa.view("breakfast",function(e,f,g,h){e.set({init:function(c){for(var b=$("#id-breakfast").hide(),a=0;a<c.length;a++){var d=$(["<div><div>",'<img src="res/'+c[a]+'">',"</div></div>"].join(""));b.append(d);d.find("img").get(0).onload=function(){var a=$(this),b=this.width/this.height,d=a.parent().parent(),c=d.width(),d=d.height();a.height(d);a.css("margin-left",-1*(d*b-c)/2)}}$("#id-header").velocity("fadeIn",{duration:700,complete:function(){b.velocity("fadeIn",{duration:1E3})}})}});$("#id-header-breakfast").on("click",
function(){var c=$(this);c.hasClass("disable")&&($("#id-header-dinner").addClass("disable"),$("#id-dinner").hide(),c.removeClass("disable"),$("#id-breakfast").velocity("fadeIn",{duration:700}))})});$.moxa.view("dinner",function(e,f,g,h){function c(b){var a=$(["<div><div>",b?'<img src="res/'+b+'">':"","</div>",b?"":"<span>ADD</span>","</div>"].join(""));null==b?a.addClass("add"):a.find("img").get(0).onload=function(){var a=$(this),b=this.width/this.height,c=a.parent().parent(),e=c.width(),c=c.height();a.height(c);a.css("margin-left",-1*(c*b-e)/2)};return a}e.set({init:function(b){for(var a=$("#id-dinner").hide(),d=0;d<b.length+1;d++)a.append(c(b[d]))},onDinnerJson:function(b){for(var a=$("#id-dinner"),
d=0;d<b.length;d++){var e=c(b[d]);a.append(e);e.velocity("fadeIn",{duration:700,display:""})}}});$("#id-header-dinner").on("click",function(){var b=$(this);b.hasClass("disable")&&($("#id-breakfast").hide(),$("#id-header-breakfast").addClass("disable"),b.removeClass("disable"),$("#id-dinner").velocity("fadeIn",{duration:700}))});$("#id-dinner").on("click","> .add",function(){$(this).remove();e.dinnerJson((new Date).getTime())})});
